# 교훈 (Lessons Learned)

개발 중 실수에서 얻은 교훈. 같은 실수를 반복하지 않기 위해 기록한다.

---

## [2026-02-25] API 엔드포인트 불일치

**사건**: 프론트엔드가 `/posts/:slug/view`를 호출했지만 백엔드는 `/posts/:slug/unlock`만 존재 → 글 조회 기능 전체 불능.

**근본 원인**: 프론트와 백엔드가 서로 독립적으로 URL 문자열을 하드코딩. 양쪽을 연결하는 계약이 없었음.

**교훈**:

1. **두 앱의 경계면(API)은 구현 전에 `packages/shared`에 먼저 정의한다.**
   - 엔드포인트 경로, 요청/응답 타입을 shared에 선언한 뒤 양쪽에서 import.
   - URL 문자열을 각 앱에 하드코딩하지 않는다.

2. **타입 시스템이 검증할 수 없는 영역(문자열 경로 등)은 항상 런타임 버그 후보다.**
   - 컴파일이 통과해도 연동이 깨져 있을 수 있다.
   - "각자 잘 만들었다"와 "함께 잘 동작한다"는 다르다.

3. **새 엔드포인트를 추가하거나 이름을 바꿀 때는 반드시 `packages/shared`부터 수정한다.**
   - shared를 수정하면 양쪽 앱에서 타입 에러가 발생하므로 누락을 컴파일 단계에서 감지할 수 있다.
